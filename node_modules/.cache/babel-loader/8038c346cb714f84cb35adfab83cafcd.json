{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Shadow/propject/project-1-mohamedctm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Shadow/propject/project-1-mohamedctm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Shadow/propject/project-1-mohamedctm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Shadow/propject/project-1-mohamedctm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Shadow/propject/project-1-mohamedctm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Shadow/propject/project-1-mohamedctm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{updatexx}from'../../api/LibraryClient';import{Eview}from'./view';import{Err1}from'../../errors/error1';// import { Route, Switch, Redirect} from 'react-router';\n//the updateUser prop takes a function that takes a user and returns voide\n// it will match updateUser in App.\nexport var UpdateUsers=/*#__PURE__*/function(_React$Component){_inherits(UpdateUsers,_React$Component);var _super=_createSuper(UpdateUsers);function UpdateUsers(props){var _this;_classCallCheck(this,UpdateUsers);_this=_super.call(this,props);_this.setUsername=function(un){_this.setState({username:un.currentTarget.value});};_this.setPassword=function(pw){_this.setState({password:pw.currentTarget.value});};_this.setFirstname=function(pw){_this.setState({firstname:pw.currentTarget.value});};_this.setLastname=function(pw){_this.setState({lastname:pw.currentTarget.value});};_this.setEmail=function(pw){_this.setState({email:pw.currentTarget.value});};_this.setRoleid=function(pw){_this.setState({role:pw.currentTarget.value});};_this.setUserid=function(pw){_this.setState({userid:pw.currentTarget.value});};_this.clearError=function(){_this.setState({errorMessage:'',isError:false,success:false,username:'',password:'',firstname:'',lastname:'',email:'',role:''});};_this.attemptUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var levelup;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();console.log(event);_context.prev=2;_context.next=5;return updatexx(_this.state.username,_this.state.password,_this.state.firstname,_this.state.lastname,_this.state.email,_this.state.role,_this.state.userid);case 5:levelup=_context.sent;_this.props.updateUserxx(levelup);_this.setState({user:levelup,username:'',password:'',success:true});console.log(levelup);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);_this.setState({password:'',isError:true,success:false,errorMessage:_context.t0.message});case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={username:'',password:'',firstname:'',lastname:'',email:'',role:'',userid:'',isError:false,errorMessage:'',success:false,user:''};return _this;}//We'll need a few functions to modify individual pieces of our state\n// These take change events\n_createClass(UpdateUsers,[{key:\"render\",value:function render(){if(this.state.isError){return/*#__PURE__*/React.createElement(Err1,{err:this.state.errorMessage});}if(!this.state.success){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.attemptUpdate},/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\" update\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{onChange:this.setUserid,value:this.state.userid,type:\"number\",name:\"id\",placeholder:\"ID (required!)\",required:true})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{onChange:this.setUsername,value:this.state.username,type:\"text\",name:\"username\",id:\"username\",placeholder:\"change username\",autoComplete:this.state.username}),/*#__PURE__*/React.createElement(\"input\",{onChange:this.setPassword,value:this.state.password,type:\"password\",name:\"password\",placeholder:\"change password\",autoComplete:\"false\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{onChange:this.setFirstname,value:this.state.firstname,type:\"text\",name:\"firstname\",placeholder:\"change firstname\"}),/*#__PURE__*/React.createElement(\"input\",{onChange:this.setLastname,value:this.state.lastname,type:\"text\",name:\"lastname\",placeholder:\"Last name\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{onChange:this.setEmail,value:this.state.email,type:\"email\",name:\"email\",placeholder:\"change email\"}),/*#__PURE__*/React.createElement(\"select\",{onChange:this.setRoleid,name:\"roleid\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"select role\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"admin\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"finance-manager\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3\"},\"employee\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"notdiv\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"submit\"}))),/*#__PURE__*/React.createElement(\"h3\",null,this.state.errorMessage));}else{var data=this.state.user;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",null,\"user updated successfuly\",/*#__PURE__*/React.createElement(\"span\",{className:\"button\",onClick:this.clearError},\"Make another update\")),/*#__PURE__*/React.createElement(Eview,{access:data.id,id:data.id,username:data.username,pass:data.password,firstname:data.firstname,lastname:data.lastname,email:data.email,role:data.role}));}}}]);return UpdateUsers;}(React.Component);","map":{"version":3,"sources":["/Users/Shadow/propject/project-1-mohamedctm/src/components/emp/updatex.tsx"],"names":["React","updatexx","Eview","Err1","UpdateUsers","props","setUsername","un","setState","username","currentTarget","value","setPassword","pw","password","setFirstname","firstname","setLastname","lastname","setEmail","email","setRoleid","role","setUserid","userid","clearError","errorMessage","isError","success","attemptUpdate","event","preventDefault","console","log","state","levelup","updateUserxx","user","message","data","id","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { User } from '../../models/User';\nimport { updatexx } from '../../api/LibraryClient';\nimport { Eview } from './view';\nimport { Err1 } from '../../errors/error1';\n// import { Route, Switch, Redirect} from 'react-router';\n\n//the updateUser prop takes a function that takes a user and returns voide\n// it will match updateUser in App.\ninterface IUpdateComponentProps {\n  updateUserxx: (user:User) => void;\n}\n\ninterface ILoginComponentState {\n  username: string|any;\n  password: string|any;\n  firstname: string|any;\n  lastname: string|any;\n  email: string|any;\n  role: string|any;\n  userid: number | any;\n  isError: boolean;\n  errorMessage: string;\n  success:boolean;\n  user: User |any;\n}\n\nexport class UpdateUsers extends React.Component<IUpdateComponentProps, ILoginComponentState> {\n\n  constructor(props: IUpdateComponentProps) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      firstname: '',\n      lastname: '',\n      email: '',\n      role: '',\n      userid: '',\n      isError: false,\n      errorMessage: '',\n      success:false,\n      user:'',\n    }\n  }\n\n  //We'll need a few functions to modify individual pieces of our state\n  // These take change events\n  setUsername = (un: any) => {   \n    this.setState({\n        username: un.currentTarget.value\n        })  \n  }\n\n  setPassword = (pw: any) => {\n    this.setState({\n      password: pw.currentTarget.value,\n    })\n  }\n  setFirstname = (pw: any) => {\n    this.setState({\n      firstname: pw.currentTarget.value,\n    })\n  }\n  setLastname= (pw: any) => {\n    this.setState({\n      lastname: pw.currentTarget.value,\n    })\n  }\n  setEmail = (pw: any) => {\n    this.setState({\n      email: pw.currentTarget.value,\n    })\n  }\n  setRoleid= (pw: any) => {\n    this.setState({\n      role: pw.currentTarget.value,\n    })\n  }\n  setUserid = (pw: any) => {\n    this.setState({\n      userid: pw.currentTarget.value,\n    })\n  }\n\n  clearError = () => {\n    this.setState({\n      errorMessage: '',\n      isError: false,\n      success: false,\n      username: '',\n      password: '',\n      firstname: '',\n      lastname: '',\n      email: '',\n      role: '',\n\n    })\n  }\n\n  attemptUpdate = async (event: any) => {\n    event.preventDefault();\n    console.log(event);\n    try {\n      const levelup : User = await updatexx(this.state.username, this.state.password,this.state.firstname,this.state.lastname,this.state.email,this.state.role,this.state.userid);\n      this.props.updateUserxx(levelup);\n      this.setState({\n          user: levelup,\n        username: '',\n        password: '',\n        success: true\n      });\n      console.log(levelup);\n    \n    } catch (error) {\n      this.setState({\n        password: '',\n        isError: true,\n        success:false,\n        errorMessage: error.message,\n      })\n    }\n  }\n\n  render() {\n      if(this.state.isError){\n          return <Err1 err={this.state.errorMessage} />\n      }\n    if(!this.state.success){\n    return (\n      <div>\n      <form onSubmit={this.attemptUpdate}>\n        <span className=\"tag\"> update</span>\n          <div>\n            <input onChange={this.setUserid} value={this.state.userid} type=\"number\" name=\"id\"  \n            placeholder=\"ID (required!)\"  required />\n          </div>\n          <div>\n          <input onChange={this.setUsername} value={this.state.username} type=\"text\" name=\"username\"\n           id=\"username\" placeholder=\"change username\"\n           autoComplete={this.state.username} />\n            <input onChange={this.setPassword} value={this.state.password} type=\"password\" name=\"password\" \n            placeholder=\"change password\" autoComplete='false' />\n          </div>\n          <div>\n            <input onChange={this.setFirstname} value={this.state.firstname} type=\"text\" name=\"firstname\" \n            placeholder=\"change firstname\"  />\n            <input onChange={this.setLastname} value={this.state.lastname} type=\"text\" name=\"lastname\" \n            placeholder=\"Last name\" />\n          </div>\n          <div>\n            <input onChange={this.setEmail} value={this.state.email} type=\"email\" name=\"email\" \n            placeholder=\"change email\"  />\n            <select onChange={this.setRoleid} name=\"roleid\">\n            <option value=\"\">select role</option>\n            <option value=\"1\">admin</option>\n            <option value=\"2\">finance-manager</option>\n            <option value=\"3\">employee</option>\n            </select>\n          </div>\n          \n          <div className=\"notdiv\">\n            <input type=\"submit\" value=\"submit\" />\n          </div>\n      </form>\n     {<h3>{this.state.errorMessage}</h3>}\n      </div>\n    );\n    }\n    else{ \n        \n        const data = this.state.user;\n        \n        return (\n      <>\n    <h3>user updated successfuly\n        <span className=\"button\" onClick={this.clearError}>Make another update</span>\n    </h3>\n    <Eview access={data.id} id={data.id} username={data.username} pass={data.password}\n          firstname={data.firstname} lastname={data.lastname}\n           email={data.email} role={data.role} />\n    </>\n     ) \n    }\n  }\n\n}"]},"metadata":{},"sourceType":"module"}