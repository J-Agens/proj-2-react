{"ast":null,"code":"var _jsxFileName = \"/Users/Shadow/Desktop/project-2-react/src/components/emp/updatex.tsx\";\nimport React from 'react';\nimport { writerUpdate } from '../../api/LibraryClient';\nimport { Eview } from './view';\nimport { Err1 } from '../../errors/error1'; // import { Route, Switch, Redirect} from 'react-router';\n//the updateWriter prop takes a function that takes a user and returns voide\n// it will match updateWriter in App.\n\nexport class UpdateWriters extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setWritername = un => {\n      this.setState({\n        username: un.currentTarget.value\n      });\n    };\n\n    this.setPassword = pw => {\n      this.setState({\n        password: pw.currentTarget.value\n      });\n    };\n\n    this.setFirstname = pw => {\n      this.setState({\n        firstname: pw.currentTarget.value\n      });\n    };\n\n    this.setLastname = pw => {\n      this.setState({\n        lastname: pw.currentTarget.value\n      });\n    };\n\n    this.setEmail = pw => {\n      this.setState({\n        email: pw.currentTarget.value\n      });\n    };\n\n    this.setPhone = pw => {\n      this.setState({\n        phone: pw.currentTarget.value\n      });\n    };\n\n    this.setPermission = pw => {\n      this.setState({\n        permission: pw.currentTarget.value\n      });\n    };\n\n    this.setWriterid = pw => {\n      this.setState({\n        userid: pw.currentTarget.value\n      });\n    };\n\n    this.clearError = () => {\n      this.setState({\n        errorMessage: '',\n        isError: false,\n        success: false,\n        username: '',\n        password: '',\n        firstname: '',\n        lastname: '',\n        email: '',\n        permission: ''\n      });\n    };\n\n    this.attemptUpdate = async event => {\n      event.preventDefault();\n      console.log(event);\n\n      try {\n        const levelup = await writerUpdate(this.state.userid, this.state.username, this.state.password, this.state.firstname, this.state.lastname, this.state.phone, this.state.email, this.state.permission);\n        this.props.updateWriterxx(levelup);\n        this.setState({\n          user: levelup,\n          username: '',\n          password: '',\n          success: true\n        });\n        console.log(levelup);\n      } catch (error) {\n        this.setState({\n          password: '',\n          isError: true,\n          success: false,\n          errorMessage: error.message\n        });\n      }\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      firstname: '',\n      lastname: '',\n      email: '',\n      phone: '',\n      permission: '',\n      userid: '',\n      isError: false,\n      errorMessage: '',\n      success: false,\n      user: ''\n    };\n  } //We'll need a few functions to modify individual pieces of our state\n  // These take change events\n\n\n  render() {\n    if (this.state.isError) {\n      return /*#__PURE__*/React.createElement(Err1, {\n        err: this.state.errorMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 18\n        }\n      });\n    }\n\n    if (!this.state.success) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.attemptUpdate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"tag\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }\n      }, \" update\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.setWriterid,\n        value: this.state.userid,\n        type: \"number\",\n        name: \"writerid\",\n        placeholder: \"ID (required!)\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.setWritername,\n        value: this.state.username,\n        type: \"text\",\n        name: \"username\",\n        id: \"username\",\n        placeholder: \"change username\",\n        autoComplete: this.state.username,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.setPassword,\n        value: this.state.password,\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"change password\",\n        autoComplete: \"false\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.setFirstname,\n        value: this.state.firstname,\n        type: \"text\",\n        name: \"firstname\",\n        placeholder: \"change firstname\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.setLastname,\n        value: this.state.lastname,\n        type: \"text\",\n        name: \"lastname\",\n        placeholder: \"Last name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.setEmail,\n        value: this.state.email,\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"change email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.setPhone,\n        value: this.state.email,\n        type: \"tel\",\n        name: \"phone\",\n        placeholder: \"change phone\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"select\", {\n        onChange: this.setPermission,\n        name: \"permission\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }\n      }, \"select permission\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }, \"Admin\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }, \"Editor\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }, \"Writer\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"notdiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 7\n        }\n      }, this.state.errorMessage));\n    } else {\n      const data = this.state.user;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 5\n        }\n      }, \"user updated successfuly\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"button\",\n        onClick: this.clearError,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 9\n        }\n      }, \"Make another update\")), /*#__PURE__*/React.createElement(Eview, {\n        access: data.id,\n        id: data.id,\n        username: data.username,\n        pass: data.password,\n        firstname: data.firstname,\n        lastname: data.lastname,\n        email: data.email,\n        role: data.role,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 5\n        }\n      }));\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/Shadow/Desktop/project-2-react/src/components/emp/updatex.tsx"],"names":["React","writerUpdate","Eview","Err1","UpdateWriters","Component","constructor","props","setWritername","un","setState","username","currentTarget","value","setPassword","pw","password","setFirstname","firstname","setLastname","lastname","setEmail","email","setPhone","phone","setPermission","permission","setWriterid","userid","clearError","errorMessage","isError","success","attemptUpdate","event","preventDefault","console","log","levelup","state","updateWriterxx","user","error","message","render","data","id","role"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Writer } from '../../models/Writer';\nimport { writerUpdate } from '../../api/LibraryClient';\nimport { Eview } from './view';\nimport { Err1 } from '../../errors/error1';\n\n// import { Route, Switch, Redirect} from 'react-router';\n\n//the updateWriter prop takes a function that takes a user and returns voide\n// it will match updateWriter in App.\ninterface IUpdateComponentProps {\n  updateWriterxx: (user:Writer) => void;\n}\n\ninterface ILoginComponentState {\n  username: string|any;\n  password: string|any;\n  firstname: string|any;\n  lastname: string|any;\n  email: string|any;\n  permission: number|any;\n  phone: string|any;\n  userid: number | any;\n  isError: boolean;\n  errorMessage: string;\n  success:boolean;\n  user: Writer |any;\n}\n\nexport class UpdateWriters extends React.Component<IUpdateComponentProps, ILoginComponentState> {\n\n  constructor(props: IUpdateComponentProps) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      firstname: '',\n      lastname: '',\n      email: '',\n      phone: '',\n      permission: '',\n      userid: '',\n      isError: false,\n      errorMessage: '',\n      success:false,\n      user:'',\n    }\n  }\n\n  //We'll need a few functions to modify individual pieces of our state\n  // These take change events\n  setWritername = (un: any) => {   \n    this.setState({\n        username: un.currentTarget.value\n        })  \n  }\n\n  setPassword = (pw: any) => {\n    this.setState({\n      password: pw.currentTarget.value,\n    })\n  }\n  setFirstname = (pw: any) => {\n    this.setState({\n      firstname: pw.currentTarget.value,\n    })\n  }\n  setLastname= (pw: any) => {\n    this.setState({\n      lastname: pw.currentTarget.value,\n    })\n  }\n  setEmail = (pw: any) => {\n    this.setState({\n      email: pw.currentTarget.value,\n    })\n  }\n  setPhone = (pw: any) => {\n    this.setState({\n      phone: pw.currentTarget.value,\n    })\n  }\n  setPermission= (pw: any) => {\n    this.setState({\n      permission: pw.currentTarget.value,\n    })\n  }\n  setWriterid = (pw: any) => {\n    this.setState({\n      userid: pw.currentTarget.value,\n    })\n  }\n\n  clearError = () => {\n    this.setState({\n      errorMessage: '',\n      isError: false,\n      success: false,\n      username: '',\n      password: '',\n      firstname: '',\n      lastname: '',\n      email: '',\n      permission: '',\n\n    })\n  }\n\n  attemptUpdate = async (event: any) => {\n    event.preventDefault();\n    console.log(event);\n    try {\n      const levelup : Writer = await writerUpdate(this.state.userid,this.state.username,this.state.password,this.state.firstname,this.state.lastname,this.state.phone,this.state.email,this.state.permission);\n      this.props.updateWriterxx(levelup);\n      this.setState({\n          user: levelup,\n        username: '',\n        password: '',\n        success: true\n      });\n      console.log(levelup);\n    \n    } catch (error) {\n      this.setState({\n        password: '',\n        isError: true,\n        success:false,\n        errorMessage: error.message,\n      })\n    }\n  }\n\n  render() {\n      if(this.state.isError){\n          return <Err1 err={this.state.errorMessage} />\n      }\n    if(!this.state.success){\n    return (\n      <div>\n      <form onSubmit={this.attemptUpdate}>\n        <span className=\"tag\"> update</span>\n          <div>\n            <input onChange={this.setWriterid} value={this.state.userid} type=\"number\" name=\"writerid\"  \n            placeholder=\"ID (required!)\"  required />\n          </div>\n          <div>\n          <input onChange={this.setWritername} value={this.state.username} type=\"text\" name=\"username\"\n           id=\"username\" placeholder=\"change username\"\n           autoComplete={this.state.username} />\n            <input onChange={this.setPassword} value={this.state.password} type=\"password\" name=\"password\" \n            placeholder=\"change password\" autoComplete='false' />\n          </div>\n          <div>\n            <input onChange={this.setFirstname} value={this.state.firstname} type=\"text\" name=\"firstname\" \n            placeholder=\"change firstname\"  />\n            <input onChange={this.setLastname} value={this.state.lastname} type=\"text\" name=\"lastname\" \n            placeholder=\"Last name\" />\n          </div>\n          <div>\n            <input onChange={this.setEmail} value={this.state.email} type=\"email\" name=\"email\" \n            placeholder=\"change email\"  />\n            <input onChange={this.setPhone} value={this.state.email} type=\"tel\" name=\"phone\" \n            placeholder=\"change phone\"  />\n            <select onChange={this.setPermission} name=\"permission\">\n            <option value=\"\">select permission</option>\n            <option value=\"1\">Admin</option>\n            <option value=\"2\">Editor</option>\n            <option value=\"3\">Writer</option>\n            </select>\n          </div>\n          \n          <div className=\"notdiv\">\n            <input type=\"submit\" value=\"submit\" />\n          </div>\n      </form>\n     {<h3>{this.state.errorMessage}</h3>}\n      </div>\n    );\n    }\n    else{ \n        \n        const data = this.state.user;\n        \n        return (\n      <>\n    <h3>user updated successfuly\n        <span className=\"button\" onClick={this.clearError}>Make another update</span>\n    </h3>\n    <Eview access={data.id} id={data.id} username={data.username} pass={data.password}\n          firstname={data.firstname} lastname={data.lastname}\n           email={data.email} role={data.role} />\n    </>\n     ) \n    }\n  }\n\n}"]},"metadata":{},"sourceType":"module"}